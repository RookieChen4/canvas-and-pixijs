<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            padding: 0;
            margin: 0
        }
    </style>
    <script src="pixi.min.js"></script>
</head>
<body>
    
</body>
<script>
    let Application = PIXI.Application,
        loader = PIXI.loader,
        resources = PIXI.loader.resources,
        Sprite = PIXI.Sprite,
        Graphics = PIXI.Graphics,
        Text = PIXI.Text,
        TextStyle = PIXI.TextStyle,
        Container = PIXI.Container;

    let app = new Application({
        width: 512,
        height: 512,                       
        antialias: true,
        transparent: false,
        resolution: 1
    })

    document.body.appendChild(app.view)

    loader
        .add("./cat.png")
        .load(setup)
    
    let cat,x,y;

    function setup() {
        cat = new Sprite(loader.resources["./cat.png"].texture);
        cat.pivot.x = cat.width / 2;
        cat.pivot.y = cat.height / 2;

        cat.x = app.screen.width / 2 - cat.x/2;
        cat.y = app.screen.height / 2 - cat.y/2;

        let circle = new Graphics();
        circle.beginFill(0x9966FF);
        circle.drawCircle(0, 0, 32);
        circle.endFill();
        circle.x = 64;
        circle.y = 130;
        app.stage.addChild(circle);
        app.stage.addChild(cat);
        app.stage.interactive = true;
        app.stage.on('mousemove', rotation);
        
        app.stage.on("click", shoot);
        app.ticker.add((delta) => {
            // cat.rotation += 0.1 * delta;
            cat.rotation = rotateToPoint(x, y, cat.position.x, cat.position.y);
        });
    }

    function rotation(event) {
        x = event.data.global.x;
        y = event.data.global.y;
    }

    function shoot(e) {
        console.log(e)
    }

    function rotateToPoint(mx, my, px, py){  
        var self = this;
        var dist_Y = my - py;
        var dist_X = mx - px;
        var angle = Math.atan2(dist_Y,dist_X);
        //var degrees = angle * 180/ Math.PI;
        return angle;   
    }
</script>
</html>