<script type="text/javascript">
function move(id) {
    let getComputedStyle = document.defaultView.getComputedStyle(id, null)
    let position = getComputedStyle.position
    let Id = id.getAttribute('id')
    getComputedStyle = null
    let targetDiv = document.getElementById(Id)
    let disX,disY,moveX,moveY,L,T
    targetDiv.addEventListener('touchstart',function(e){
        disX = e.touches[0].pageX - this.offsetLeft
        disY = e.touches[0].pageY - this.offsetTop
        e.preventDefault()
    })
    targetDiv.addEventListener('touchmove', function (e) {
        let Height,Width
        if(position == 'fixed') {
            Height = document.body.clientHeight - this.offsetHeight
            Width = document.body.clientWidth - this.offsetWidth
        } else if(position == 'absolute') {
            Height = document.documentElement.scrollHeight - this.offsetHeight
            Width = document.documentElement.scrollWidth - this.offsetWidth
        }
        L = e.touches[0].pageX - disX; 
        T = e.touches[0].pageY - disY;
        if (L < 0) {
            L = 0; // l 小于 0  说明 光标超出视窗左边框 left 设置为 0 
        } else if(L > Width) {
            L = Width
        } // 这个是移动图标超出右边框的情况 设置 图标 贴住右边框
        if (T < 0) {
            T = 0; // T 小于 0  说明 光标超出视窗上边框 top 设置为 0 
        } else if(T > Height) {
            T = Height
        } // 这个是移动图标超出下边框的情况 设置 图标 贴住下边框
        moveX = L + 'px';
        moveY = T + 'px';
        this.style.left = moveX;
        this.style.top = moveY;
    });
}
window.onload = function () {
    move(touchMove);
    move(test);
}
// window.onload = function () {
//     let getComputedStyle  = document.defaultView.getComputedStyle(touchMove, null)
//     let position = getComputedStyle.position
//     getComputedStyle = null

//     var oDiv = document.getElementById('touchMove');

//     var disX, moveX, L, T;

//     // starX, starY, starXEnd, starYEnd // 开始的位置 坐标 目前不需要
//     oDiv.addEventListener('touchstart', function (e) {
//         // disX = e.touches[0].clientX - this.offsetLeft;  //如果不刷新滚轮用这个方法
//         // disY = e.touches[0].clientY - this.offsetTop;
//         disX = e.touches[0].pageX - this.offsetLeft;   // 可以刷新滚轮
//         disY = e.touches[0].pageY - this.offsetTop;   
//         e.preventDefault(); //阻止
//         // starX = e.touches[0].clientX;
//         // starY = e.touches[0].clientY;
//     }); // starX ,starY起始坐标  disY,disY鼠标在元素内部距离左边框和上边框的距离
//     oDiv.addEventListener('touchmove', function (e) {
//         let Height,Width
//         if(position == 'fixed') {
//             Height = document.body.clientHeight - this.offsetHeight
//             Width = document.body.clientWidth - this.offsetWidth
//         } else if(position == 'absolute') {
//             Height = document.documentElement.scrollHeight - this.offsetHeight
//             Width = document.documentElement.scrollWidth - this.offsetWidth
//         }
//         // L = e.touches[0].clientX - disX; 
//         // T = e.touches[0].clientY - disY;
//         L = e.touches[0].pageX - disX; 
//         T = e.touches[0].pageY - disY;
//         // starXEnd = e.touches[0].clientX - starX;
//         // starYEnd = e.touches[0].clientY - starY;
//         if (L < 0) {
//             L = 0; // l 小于 0  说明 光标超出视窗左边框 left 设置为 0 
//         } else if(L > Width) {
//             L = Width
//         } // 这个是移动图标超出右边框的情况 设置 图标 贴住右边框
//         if (T < 0) {
//             T = 0; // T 小于 0  说明 光标超出视窗上边框 top 设置为 0 
//         } else if(T > Height) {
//             T = Height
//         } // 这个是移动图标超出下边框的情况 设置 图标 贴住下边框
//         moveX = L + 'px';
//         moveY = T + 'px';
//         this.style.left = moveX;
//         this.style.top = moveY;
//     });
//     window.addEventListener('touchend', function (e) {
//         //判断滑动方向
//     });
//     function defaultEvent(e) {
//         console.log('阻止页面默认滚动',e)
//         e.preventDefault();
//     }
// }
</script>
<style type="text/css">
	#touchMove {
		position: absolute;
		width: 100px;
		height: 100px;
		background: red;
		left: 0;
		top: 0;
	}
    #test {
		position: fixed;
		width: 100px;
		height: 100px;
		background: greenyellow;
		left: 0;
		top: 0;
	}
	#touchMove1 {
		width: 100px;
		height: 100px;
		background: blue;
	}
	#touchMove2 {
		width: 100px;
		height: 100px;
		background: yellow;
	}
</style>
<body>
	<div id="touchMove">
    </div>
    <div id="test">
	</div>
	<div id="touchMove1">
	</div>
	<div id="touchMove2">
    </div>
    <div id="touchMove1">
	</div>
	<div id="touchMove2">
    </div>
    <div id="touchMove1">
	</div>
	<div id="touchMove2">
    </div>
    <div id="touchMove1">
	</div>
	<div id="touchMove2">
    </div>
    <div id="touchMove1">
	</div>
	<div id="touchMove2">
    </div>
    <div id="touchMove1">
	</div>
	<div id="touchMove2">
    </div>
    <div id="touchMove1">
	</div>
	<div id="touchMove2">
    </div>
    <div id="touchMove1">
	</div>
	<div id="touchMove2">
    </div>
    <div id="touchMove1">
	</div>
	<div id="touchMove2">
    </div>
    <div id="touchMove1">
	</div>
	<div id="touchMove2">
	</div>
</body>